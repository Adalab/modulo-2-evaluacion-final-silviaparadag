"use strict";const cardList=document.querySelector(".js_list"),cardListFav=document.querySelector(".js_list_fav"),inputSearch=document.querySelector(".js_inputSearch"),btnSearch=document.querySelector(".js_btnSearch"),resetBtn=document.querySelector(".js-reset"),serverURL="https://api.disneyapi.dev/character?page=50",serverSearchURL="https://api.disneyapi.dev/character?pageSize=50&name=",emptyURL="https://via.placeholder.com/210x295/fbebf9/555555/?text=Disney%20character%20image%20not%20avaliable";let disneyDataList=[],disneyDataListFav=[];const setInLocalStorage=()=>{localStorage.setItem("lsFavCards",JSON.stringify(disneyDataListFav))},getFromLocalStorage=()=>{const e=localStorage.getItem("lsFavCards");null!==e&&(disneyDataListFav=JSON.parse(e),renderFavCardList())};getFromLocalStorage();const getApiData=()=>{fetch(serverURL).then(e=>e.json()).then(e=>{console.log(e),disneyDataList=e.data,renderAllCharacters(disneyDataList)})};fetch(serverURL).then(e=>e.json()).then(e=>{console.log(e),disneyDataList=e.data,renderAllCharacters(disneyDataList)});const handleSearch=e=>{e.preventDefault();const a=inputSearch.value;fetch(serverSearchURL+""+a).then(e=>e.json()).then(e=>{disneyDataList=e.data,renderAllCharacters(disneyDataList)})};function renderOneCharacter(e,a){let t="",r="";a?r='<div class="card__btn js_deleteFav"><button class="card__btn--x js_deleteFav-btn">x</button></div>':t="js_card ",-1!==disneyDataListFav.findIndex(a=>a._id===e._id)&&(t+="card__fav"),void 0===e.imageUrl&&(e.imageUrl=emptyURL);let n=`<li id="${e._id}" class="card ${t}">`;return n+=""+r,n+='<article class="character">',n+=`<img class="character__img js_img" src="${e.imageUrl}" alt="Disney Characters" />`,n+=`<p class="character__name js_name">${e.name}</p>`,n+="</article>\n            </li>",n}function renderAllCharacters(e){cardList.innerHTML="";for(const a of e)cardList.innerHTML+=renderOneCharacter(a);addEventCards()}function addEventCards(){const e=document.querySelectorAll(".js_card");for(const a of e)a.addEventListener("click",handleFav)}function renderFavCardList(){cardListFav.innerHTML="";for(const e of disneyDataListFav)cardListFav.innerHTML+=renderOneCharacter(e,!0);const e=document.querySelectorAll(".js_deleteFav");for(const a of e)a.addEventListener("click",handleDelete)}function handleFav(e){event.preventDefault();const a=parseInt(e.currentTarget.id),t=disneyDataList.find(e=>e._id===a),r=disneyDataListFav.findIndex(e=>e._id===a);-1===r?disneyDataListFav.push(t):disneyDataListFav.splice(r,1),localStorage.setItem("lsFavCards",JSON.stringify(disneyDataListFav)),renderFavCardList(),renderAllCharacters(disneyDataList)}function handleReset(e){e.preventDefault(),disneyDataListFav=[],renderFavCardList(),localStorage.removeItem("lsFavCards"),renderAllCharacters(disneyDataList)}function handleDelete(e){const a=parseInt(e.currentTarget.id),t=disneyDataListFav.findIndex(e=>e._id===a);disneyDataListFav.splice(t,1),renderFavCardList(),renderAllCharacters(disneyDataList)}btnSearch.addEventListener("click",handleSearch),resetBtn.addEventListener("click",handleReset);